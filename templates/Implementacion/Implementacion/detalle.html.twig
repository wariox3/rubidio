{% extends 'base.html.twig' %}
{% block content %}
    {{ form_start(form, { 'attr': {'class': 'form-horizontal'} }) }}
    <div class="btn-toolbar" style="float:left">
        <div class="btn-group">
            <a class="btn btn-default btn-sm" href="{{ path('implementacion_implementacion_lista') }}">Volver</a>
        </div>
        <div class="btn-group">
            {{ form_widget(form.btnImprimirActaTerminacion) }}
            {{ form_widget(form.btnImprimirPlanTrabajo) }}
        </div>
    </div>
    <br/><br/>
    <table width="100%" class="table table-condensed table-bordered">
        <tr>
            <td class="titulo">CODIGO:</td>
            <td class="td-in-well">{{ arImplementacion.codigoImplementacionPk }}</td>
            <td class="titulo">NOMBRE:</td>
            <td class="td-in-well">{{ arImplementacion.nombre }}</td>
            <td class="titulo">CLIENTE</td>
            <td class="td-in-well">{{ arImplementacion.clienteRel.nombreCorto }}</td>
        </tr>
    </table>
    <div class="row">
        <div class="col-md-12">
            <div class="tabs tabs-primary">
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#devoluciones" data-toggle="tab"><i class="fa fa-star"></i> Temas</a>
                    </li>
                    <li><a href="#otro" data-toggle="tab">Otro</a></li>
                </ul>
                <div class="tab-content">
                    <div id="devoluciones" class="tab-pane active">
                        <section class="panel">
                            <div class="panel-heading">
                                <h2 class="panel-title">Filtro de busqueda</h2>
                            </div>
                            <div class="panel-body">
                                <div class="form-group">
                                    <label class="col-sm-1 control-label">Modulo:</label>
                                    <div class="col-sm-5">
                                        {{ form_widget(form.modulo) }}
                                    </div>
                                    <label class="col-sm-1 control-label">Capacitado:</label>
                                    <div class="col-sm-2">
                                        {{ form_widget(form.estadoCapacitado) }}
                                    </div>
                                    <label class="col-sm-1 control-label">Terminado:</label>
                                    <div class="col-sm-2">
                                        {{ form_widget(form.estadoTerminado) }}
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-9 col-sm-offset-3">
                                        {{ form_widget(form.btnFiltrar, { 'attr': {'class': 'btn btn-primary', 'style':'float:right'} }) }}
                                    </div>
                                </div>
                            </div>
                        </section>
                        <br>
                        <div class="table-responsive">
                            <table class="table table-condensed table-bordered table-hover">
                                <thead>
                                <tr>
                                    <th>Id</th>
                                    <th>Modulo</th>
                                    <th>Cod</th>
                                    <th>Tema</th>
                                    <th>Descripcion</th>
                                    <th>Compromiso</th>
                                    <th>Comentario</th>
                                    <th>Comentario implementador</th>
                                    <th>Accion</th>
                                    <th>Responsable</th>
                                    <th>Fecha</th>
                                    <th title="Tiempo en minutos para capacitar cada tema">Tiempo</th>
                                    <th title="Estado inicio">Ini</th>
                                    <th title="Estado capacitado">Cap</th>
                                    <th title="Estado terminado">Ter</th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th class="text-center" title="seleccionar todos"><input type="checkbox"
                                                                                             name="ChkSeleccionarTodos"
                                                                                             onclick="ChequearTodosTabla(this, 'ChkSeleccionar[]')">
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for arImplementacionDetalle in arImplementacionDetalles %}
                                    <tr>
                                        <td>{{ arImplementacionDetalle.codigoImplementacionDetallePk }}</td>
                                        <td>{{ arImplementacionDetalle.moduloNombre }}</td>
                                        <td>{{ arImplementacionDetalle.codigoTemaFk }}</td>
                                        <td>{{ arImplementacionDetalle.temaNombre }}</td>
                                        <td>{{ arImplementacionDetalle.temaDescripcion }}</td>
                                        <td>{{ arImplementacionDetalle.fechaCompromiso?arImplementacionDetalle.fechaCompromiso | date('Y-m-d H:i'):'' }}</td>
                                        <td>{{ arImplementacionDetalle.comentario }}</td>
                                        <td>{{ arImplementacionDetalle.comentarioImplementador }}</td>
                                        <td>{{ arImplementacionDetalle.accionNombre }}</td>
                                        <td>{{ arImplementacionDetalle.responsableNombre }}</td>
                                        <td>{{ arImplementacionDetalle.estadoCapacitado?arImplementacionDetalle.fecha | date('Y-m-d H:i'):'' }}</td>
                                        <td>{{ arImplementacionDetalle.tiempo }}</td>
                                        <td>{{ arImplementacionDetalle.estadoInicio?'SI':'NO' }}</td>
                                        <td>{{ arImplementacionDetalle.estadoCapacitado?'SI':'NO' }}</td>
                                        <td>{{ arImplementacionDetalle.estadoTerminado?'SI':'NO' }}</td>
                                        <td class="text-center">
                                            <a href="javascript:abrirVentana3('{{ path('implementacion_implementacion_detalle_nuevo', {'id': arImplementacionDetalle.codigoImplementacionDetallePk}) }}', 'Escalar', 600, 1200)">
                                                <i class="fa fa-edit fa-lg"></i>
                                            </a>
                                        </td>
                                        <td class="text-center">
                                            <a href="javascript:abrirVentana3('{{ path('documental_archivo_lista', {'tipo': '1',  'codigo': arImplementacionDetalle.codigoImplementacionDetallePk}) }}', 'Archivo', 600, 1200)">
                                                <i class="fa fa-edit fa-upload "></i>
                                            </a>
                                        </td>
                                        <td class="text-center">
                                            {% if arImplementacionDetalle.codigoDocumentacionFk %}
                                                <a href="http://semantica.com.co/semanticaweb/public/index.php/documetacion/detalle/{{ arImplementacionDetalle.codigoDocumentacionFk }}" target="_blank">
                                                    <i class="fa fa-edit fa-file-text-o "></i>
                                                </a>
                                            {% endif %}
                                        </td>
                                        <td class="text-center">
                                            {% if arImplementacionDetalle.codigoAccionPk  == "CAP"  and arImplementacionDetalle.estadoCapacitado == false %}
                                                <input type="checkbox" name="ChkSeleccionar[]"
                                                       value="{{ arImplementacionDetalle.codigoImplementacionDetallePk }}"
                                                       title="seleccionar tema"/>
                                            {% endif %}
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <br>
                        <div style="display: flex; flex-direction: row-reverse">
                            {{ form_widget(form.btnImprimir) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{ form_end(form) }}
{% endblock %}
